{{ define "title" }}
	{{ $hasRoleWebCoreS2cTntMod := .HasRole "role_web_core_auth_s2c_tnt_mod" }}
	{{ if $hasRoleWebCoreS2cTntMod }}
		{{.T "web-core-auth-s2c-tnt-page.title-edit"}}
	{{ else }}
		{{.T "web-core-auth-s2c-tnt-page.title-view"}}
	{{ end }}
{{ end }}

{{ define "content" }}
	{{ $hasRoleWebCoreS2cTntMod := .HasRole "role_web_core_auth_s2c_tnt_mod" }}
	{{ $tft                     := .TFT }}

	<div id="content">
		{{if .HasRole "role_web_core_auth_s2c_tnt_inf"}}
		<div class="grid grid-cols-1 grid-rows-2 mb-8 border-b border-gray-200 pb-5">
			<div class="col-start-1 row-start-1">
				<h2 class="text-base font-semibold text-gray-900">
					{{ if $hasRoleWebCoreS2cTntMod }}
						{{.T "web-core-auth-s2c-tnt-page.header-edit"}}
					{{ else }}
						{{.T "web-core-auth-s2c-tnt-page.header-view"}}
					{{ end }}
				</h2>
			</div>
			<div class="col-start-1 row-start-2">
				<p class="mt-2 max-w-4xl text-sm text-gray-500">
					{{ if $hasRoleWebCoreS2cTntMod }}
						{{.T "web-core-auth-s2c-tnt-page.descr-edit"}}
					{{ else }}
						{{.T "web-core-auth-s2c-tnt-page.descr-view"}}
					{{ end }}
				</p>
			</div>
		</div>

		<div _="install TabContainer">
			<div role="tablist"
			     class="-mb-px flex pb-10">
				<button role="tab"
					id="tab-s2c-gen"
					aria-controls="panel-s2c-gen"
					class="w-1/4 border-b-2 border-transparent px-1 py-4 text-center text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
					Service Provider : General Information
				</button>
				<button role="tab"
					id="tab-s2c-dflt"
					aria-controls="panel-s2c-dflt"
					class="w-1/4 border-b-2 border-transparent px-1 py-4 text-center text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
					Service Provider : New certificate settings
				</button>
				<button role="tab"
					id="tab-s2c-spc"
					aria-controls="panel-s2c-spc"
					class="w-1/4 border-b-2 border-transparent px-1 py-4 text-center text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
					Service provider : certificates
				</button>
				<button role="tab"
					id="tab-s2c-idp"
					aria-controls="panel-s2c-idp"
					class="w-1/4 border-b-2 border-transparent px-1 py-4 text-center text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
					Identity provider : configuration
				</button>
			</div>

			<div role="tabpanel"
			     id="panel-s2c-gen"
			     aria-labelledby="tab-s2c-gen"
			     hidden>
				{{ $s2c := (index .ResultSet.S2c 0)}}
				<div class="pb-[100px]">
					{{if $hasRoleWebCoreS2cTntMod}}
					<form hx-patch="/web/core/auth/s2c/tnt/gen"
					      hx-swap="none">
					{{end}}
						<div>
							<div id="s2c-tnt-mod-gen-uts-ctr">
								<input id="s2c-tnt-mod-gen-uts"
								       name="s2c-tnt-mod-gen-uts"
								       type="hidden"
								       value="{{ $s2c.Uts.Format $tft }}">
							</div>

							<div class="pb-2">
								<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
									<div class="sm:col-span-3">
										<div class="grid grid-cols-1">
											<div class="col-start-1">
												<label for="s2c-tnt-mod-gen-aum-id"
												       class="block text-sm/6 font-medium text-gray-900">
													{{if $hasRoleWebCoreS2cTntMod}}
														{{ .T "web-core-auth-s2c-tnt-mod-gen-form.input-label-edit-aum-id" }}
													{{else}}
														{{ .T "web-core-auth-s2c-tnt-mod-gen-form.label-view-aum-id" }}
													{{end}}
												</label>
												<div class="mt-2">
													{{if $hasRoleWebCoreS2cTntMod}}
													<select name="s2c-tnt-mod-gen-aum-id"
														id="s2c-tnt-mod-gen-aum-id"
														class="w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
														{{ range $aum := .FormOpts.Opts.aum }}
														<option value="{{$aum.Id}}" {{if eq $aum.Id $s2c.AumId}}selected{{end}}>{{ $aum.Value }}</option>
														{{ end }}
													</select>
													{{else}}
													<span id="s2c-tnt-mod-gen-aum-nm"
													      class="sm:text-sm/6">
														{{ range $aum := .FormOpts.Opts.aum }}
															{{if eq $aum.Id $s2c.AumId}}
																{{$aum.Value}}
															{{end}}
														{{ end }}
													</span>
													{{end}}
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>


							<div class="pb-2">
								<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
									<div class="sm:col-span-3">
										<div class="grid grid-cols-1">
											<div class="col-start-1">
												<label class="block text-sm/6 font-medium text-gray-900">
													{{.T "web-core-auth-s2c-tnt-mod-gen-form.label-view-acs-url"}}
												</label>
												<div class="mt-2">
													<span id="s2c-tnt-mod-epp-acs-pt"
													      class="sm:text-sm/6">
														{{$s2c.EppAcsPt}}
													</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="pb-2">
								<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
									<div class="sm:col-span-3">
										<div class="grid grid-cols-1">
											<div class="col-start-1">
												<label class="block text-sm/6 font-medium text-gray-900">
													{{.T "web-core-auth-s2c-tnt-mod-gen-form.label-view-mtd-url"}}
												</label>
												<div class="mt-2">
													<span id="s2c-tnt-mod-epp-mtd-pt"
													      class="sm:text-sm/6">
														{{$s2c.EppMtdPt}}
													</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					{{if $hasRoleWebCoreS2cTntMod}}
						<div class="fixed bottom-0 left-0 w-full h-[100px] bg-white flex items-center justify-end pr-4 border-t border-gray-200">
							<button type="submit"
								class="relative flex rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
								<img class="htmx-indicator htmx-spinner absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
								     src="/static/img/spinner-white.svg">
								<span class="htmx-indicator htmx-text">
									{{.T "web-core-auth-s2c-tnt-mod-gen-form.submit-button-label"}}
								</span>
							</button>
						</div>
					</form>
					{{end}}
				</div>
			</div>
			<div role="tabpanel"
			     id="panel-s2c-dflt"
			     aria-labelledby="tab-s2c-dflt"
			     hidden>
				Certificate defaults
			</div>
			<div role="tabpanel"
			     id="panel-s2c-spc"
			     aria-labelledby="tab-s2c-spc"
			     hidden>
				Certificates
			</div>
			<div role="tabpanel"
			     id="panel-s2c-idp"
			     aria-labelledby="tab-s2c-idp"
			     hidden>
				Identity providers
			</div>
		</div>
		{{end}}
	</div>
{{ end }}

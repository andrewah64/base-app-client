{{ define "title" }}
	{{ $hasRoleWebCoreOccTntMod := .HasRole "role_web_core_auth_occ_tnt_mod" }}
	{{ if $hasRoleWebCoreOccTntMod }}
		{{.T "web-core-auth-occ-tnt-page.title-edit"}}
	{{ else }}
		{{.T "web-core-auth-occ-tnt-page.title-view"}}
	{{ end }}
{{ end }}

{{ define "content" }}
	{{ $hasRoleWebCoreOccTntMod := .HasRole "role_web_core_auth_occ_tnt_mod" }}
	{{ $tft                     := .TFT }}

	<div id="content">
		{{if .HasRole "role_web_core_auth_occ_tnt_inf"}}
		<div class="grid grid-cols-1 grid-rows-2 mb-8 border-b border-gray-200 pb-5">
			<div class="col-start-1 row-start-1">
				<h2 class="text-base font-semibold text-gray-900">
					{{ if $hasRoleWebCoreOccTntMod }}
						{{.T "web-core-auth-occ-tnt-page.header-edit"}}
					{{ else }}
						{{.T "web-core-auth-occ-tnt-page.header-view"}}
					{{ end }}
				</h2>
			</div>
			<div class="col-start-1 row-start-2">
				<p class="mt-2 max-w-4xl text-sm text-gray-500">
					{{ if $hasRoleWebCoreOccTntMod }}
						{{.T "web-core-auth-occ-tnt-page.descr-edit"}}
					{{ else }}
						{{.T "web-core-auth-occ-tnt-page.descr-view"}}
					{{ end }}
				</p>
			</div>
		</div>

		<div _="install TabContainer">
			<div role="tablist"
			     class="-mb-px flex pb-10">
				{{range $ocp := .ResultSet.Ocp}}
					<button role="tab"
						id="tab-{{$ocp.OcpNm}}"
						aria-controls="panel-{{$ocp.OcpNm}}"
						class="w-1/4 border-b-2 border-transparent px-1 py-4 text-center text-sm font-medium text-gray-500 hover:border-gray-300 hover:text-gray-700">
						OIDC : {{$ocp.OcpNm}}
					</button>
				{{end}}
			</div>

			{{ $clientEnabledLabel    := .T "web-core-auth-occ-tnt-mod-form.input-label-client-enabled"     }}
			{{ $editClientIdLabel     := .T "web-core-auth-occ-tnt-mod-form.input-label-edit-client-id"     }}
			{{ $editClientSecretLabel := .T "web-core-auth-occ-tnt-mod-form.input-label-edit-client-secret" }}
			{{ $editClientUrlLabel    := .T "web-core-auth-occ-tnt-mod-form.input-label-edit-client-url"    }}
			{{ $clientCallbackLabel   := .T "web-core-auth-occ-tnt-mod-form.label-client-callback-url"      }}
			{{ $viewClientIdLabel     := .T "web-core-auth-occ-tnt-mod-form.label-view-client-id"           }}
			{{ $viewClientSecretLabel := .T "web-core-auth-occ-tnt-mod-form.label-view-client-secret"       }}
			{{ $viewClientUrlLabel    := .T "web-core-auth-occ-tnt-mod-form.label-view-client-url"          }}
			{{ $submitButtonLabel     := .T "web-core-auth-occ-tnt-mod-form.submit-button-label"            }}

			{{range $occ := .ResultSet.Occ}}
			<div role="tabpanel"
			     id="panel-{{$occ.OcpNm}}"
			     aria-labelledby="tab-{{$occ.OcpNm}}"
			     hidden>
				{{ if $hasRoleWebCoreOccTntMod }}
				<form hx-patch="/web/core/auth/occ/tnt/{{$occ.OccId}}"
				      hx-swap="none">
				{{ end }}

					<div class="pb-[100px]">

						<div id="occ-tnt-mod-uts-ctr-{{$occ.OccId}}">
							<input id="occ-tnt-mod-uts-{{$occ.OccId}}"
							       name="occ-tnt-mod-uts-{{$occ.OccId}}"
							       type="hidden"
							       value="{{ $occ.Uts.Format $tft }}">
						</div>

						<div class="pb-2">
							<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
								<div class="sm:col-span-3">
									<div class="grid grid-cols-1">
										<div class="col-start-1">
											<label for="occ-tnt-mod-client-id-{{$occ.OccId}}"
											       class="block text-sm/6 font-medium text-gray-900">
												{{if $hasRoleWebCoreOccTntMod}}
													{{ $editClientIdLabel }}
												{{else}}
													{{ $viewClientIdLabel }}
												{{end}}
											</label>
											<div class="mt-2">
												{{if $hasRoleWebCoreOccTntMod}}
													<input type="text"
													       name="occ-tnt-mod-client-id-{{$occ.OccId}}"
													       id="occ-tnt-mod-client-id-{{$occ.OccId}}"
													       value="{{$occ.OccClientId}}"
													       required
													       class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
												{{else}}
													<span id="occ-tnt-mod-client-id-{{$occ.OccId}}"
													      class="sm:text-sm/6">
														{{$occ.OccClientId}}
													</span>
												{{end}}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="pb-2">
							<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
								<div class="sm:col-span-3">
									<div class="grid grid-cols-1">
										<div class="col-start-1">
											<label for="occ-tnt-mod-client-secret-{{$occ.OccId}}"
											       class="block text-sm/6 font-medium text-gray-900">
												{{if $hasRoleWebCoreOccTntMod}}
													{{ $editClientSecretLabel }}
												{{else}}
													{{ $viewClientSecretLabel }}
												{{end}}
											</label>
											<div class="mt-2">
												{{if $hasRoleWebCoreOccTntMod}}
													<input type="text"
													       name="occ-tnt-mod-client-secret-{{$occ.OccId}}"
													       id="occ-tnt-mod-client-secret-{{$occ.OccId}}"
													       value="{{$occ.OccClientSecret}}"
													       required
													       class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
												{{else}}
													<span id="occ-tnt-mod-client-secret-{{$occ.OccId}}"
													      class="sm:text-sm/6">
														{{$occ.OccClientSecret}}
													</span>
												{{end}}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="pb-2">
							<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
								<div class="sm:col-span-3">
									<div class="grid grid-cols-1">
										<div class="col-start-1">
											<label for="occ-tnt-mod-client-url-{{$occ.OccId}}"
											       class="block text-sm/6 font-medium text-gray-900">
												{{if $hasRoleWebCoreOccTntMod}}
													{{ $editClientUrlLabel }}
												{{else}}
													{{ $viewClientUrlLabel }}
												{{end}}
											</label>
											<div class="mt-2">
												{{if $hasRoleWebCoreOccTntMod}}
													<input type="url"
													       name="occ-tnt-mod-client-url-{{$occ.OccId}}"
													       id="occ-tnt-mod-client-url-{{$occ.OccId}}"
													       value="{{$occ.OccUrl}}"
													       required
													       class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
												{{else}}
													<span id="occ-tnt-mod-client-url-{{$occ.OccId}}"
													      class="sm:text-sm/6">
														{{$occ.OccUrl}}
													</span>
												{{end}}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="pb-2">
							<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
								<div class="sm:col-span-3">
									<div class="grid grid-cols-1">
										<div class="col-start-1">
											<label for="occ-tnt-mod-enabled-{{$occ.OccId}}"
											       class="block text-sm/6 font-medium text-gray-900">
												{{ $clientEnabledLabel }}
											</label>
											<div class="mt-2 flex h-6 shrink-0 items-center">
												<div class="group grid size-4 grid-cols-1">
													<input id="occ-tnt-mod-enabled-{{$occ.OccId}}"
													       name="occ-tnt-mod-enabled-{{$occ.OccId}}"
													       type="checkbox"
													       value="true"
													       {{if $occ.OccEnabled}}checked{{end}}
													       {{if not $hasRoleWebCoreOccTntMod}}disabled{{end}}
													       class="col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto">
													<svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25"
													     viewBox="0 0 14 14"
													     fill="none">
														<path class="opacity-0 group-has-checked:opacity-100"
														      d="M3 8L6 11L11 3.5"
														      stroke-width="2"
														      stroke-linecap="round"
														      stroke-linejoin="round" />
														<path class="opacity-0 group-has-indeterminate:opacity-100"
														      d="M3 7H11"
														      stroke-width="2"
														      stroke-linecap="round"
														      stroke-linejoin="round" />
													</svg>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="pb-2">
							<div class="mt-5 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
								<div class="sm:col-span-3">
									<div class="grid grid-cols-1">
										<div class="col-start-1">
											<label class="block text-sm/6 font-medium text-gray-900">
												{{$clientCallbackLabel}}
											</label>
											<div class="mt-2">
												<span id="occ-tnt-mod-cb-url-{{$occ.OccId}}"
												      class="sm:text-sm/6">
													{{$occ.OccCbUrl}}
												</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

					</div>

				{{ if $hasRoleWebCoreOccTntMod }}
					<div class="fixed bottom-0 left-0 w-full h-[100px] bg-white flex items-center justify-end pr-4 border-t border-gray-200">
						<button type="submit"
							class="relative flex rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
							<img class="htmx-indicator htmx-spinner absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
							     src="/static/img/spinner-white.svg">
							<span>
								{{ $submitButtonLabel }}
							</span>
						</button>
					</div>
				</form>
				{{ end }}
			</div>
			{{end}}
		</div>
		{{end}}
	</div>
{{ end }}

{{ define "title" }}
	{{ $grpNm := (index .ResultSet.Group 0).GrpNm }}

	{{ .T "web-core-auth-rol-grp-tnt-page.title" "grpNm" $grpNm }}
{{ end }}

{{ define "content" }}
<div id="content">
	{{ $grpId     := (index .ResultSet.Group 0).GrpId }}
	{{ $grpNm     := (index .ResultSet.Group 0).GrpNm }}
	{{ $grpCanEdt := and (.HasRole "role_web_core_auth_rol_grp_tnt_mod") (index .ResultSet.Group 0).GrpCanEdt }}

	{{if and (.HasRole "role_web_core_auth_rol_grp_tnt_inf") (gt (len .ResultSet.Search) 0)}}
	<div class="grid grid-cols-2 grid-rows-1 mb-8">
		<div class="col-start-1 row-start-1">
			<h2 class="text-base font-semibold text-gray-900">
				{{ if $grpCanEdt }}
					{{.T "web-core-auth-rol-grp-tnt-mod-form.header-edit" "grpNm" $grpNm}}
				{{ else }}
					{{.T "web-core-auth-rol-grp-tnt-mod-form.header-view" "grpNm" $grpNm}}
				{{ end }}
			</h2>
		</div>
		<div class="col-start-1 row-start-2">
			<p class="mt-2 max-w-4xl text-sm text-gray-500">
				{{ if $grpCanEdt }}
					{{.T "web-core-auth-rol-grp-tnt-mod-form.descr-edit"}}
				{{ else }}
					{{.T "web-core-auth-rol-grp-tnt-mod-form.descr-view"}}
				{{ end }}
			</p>
		</div>
	</div>

	<div>
		{{if $grpCanEdt}}
		<form hx-patch="/web/core/auth/rol/grp/tnt/{{$grpId}}"
		      hx-swap="none">
		{{end}}
			<div class="pb-[100px]">
				<table id="rol-grp-tnt-inf-res"
				       class="min-w-full divide-y divide-gray-300">
					<thead>
						<tr>
							<th scope="col"
							    class="relative px-7 sm:w-12 sm:px-6">
								{{if $grpCanEdt}}
								<div class="group absolute top-1/2 left-4 -mt-2 grid size-4 grid-cols-1">
									<input type="checkbox"
								               id="rol-grp-tnt-inf-dbrl-id"
								               class="col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto"
								               _="install CbdgSelectAll(tb : #rol-grp-tnt-inf-res, rcb : 'rol-grp-tnt-inf-dbrl-id', btn : #rol-grp-tnt-inf-dgd-btn-txt, btntmptxt : #rol-grp-tnt-inf-dgd-btn-tmp-txt)">
									<svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25" viewBox="0 0 14 14" fill="none">
										<path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
										<path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
									</svg>
								</div>
								{{end}}
							</th>
							<th scope="col"
							    class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">
								{{.T "web-core-auth-rol-grp-tnt-mod-results.header-label-dbrl-ds"}}
							</th>
						</tr>
					</thead>
					<tbody class="bg-white">
						{{ range $dbrl := .ResultSet.Search }}
						<tr class="even:bg-gray-50">
							<td class="relative px-7 sm:w-12 sm:px-6">
								<div class="group absolute top-1/2 left-4 -mt-2 grid size-4 grid-cols-1">
									{{if $grpCanEdt}}
									<input type="checkbox"
									       name="rol-grp-tnt-inf-dbrl-id"
									       value="{{ $dbrl.DbrlId }}"
									       {{if $dbrl.DbrlHas}}checked{{end}}
									       class="col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto"
									       _="install CbdgSelectRow(tb : #rol-grp-tnt-inf-res , acb : #rol-grp-tnt-inf-dbrl-id , btn : #rol-grp-tnt-inf-dgd-btn-txt , btntmptxt : #rol-grp-tnt-inf-dgd-btn-tmp-txt)">
									{{else}}
									<input type="hidden"
									       name="rol-grp-tnt-inf-dbrl-id"
									       value="{{ $dbrl.DbrlId }}">
									<input type="checkbox"
									       value="{{ $dbrl.DbrlId }}"
									       disabled
									       {{if $dbrl.DbrlHas}}checked{{end}}
									       class="col-start-1 row-start-1 appearance-none rounded-sm border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto">
									{{end}}
									<svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-disabled:stroke-gray-950/25" viewBox="0 0 14 14" fill="none">
										<path class="opacity-0 group-has-checked:opacity-100" d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
										<path class="opacity-0 group-has-indeterminate:opacity-100" d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
									</svg>
								</div>
							</td>
							<td class="px-3 py-4 text-sm whitespace-nowrap text-gray-500">
								{{$dbrl.DbrlDs}}
							</td>
						</tr>
						{{ end }}
					</tbody>
				</table>
			</div>
		{{if $grpCanEdt}}
			<div class="fixed bottom-0 left-0 w-full h-[100px] bg-white flex items-center justify-end pr-4 border-t border-gray-200">
				<button class="relative flex rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
					<img class="htmx-indicator htmx-spinner absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"
					     src="/static/img/spinner-white.svg"
					     alt="Progress indicator">
					<span id="rol-grp-tnt-inf-dgd-btn-txt"
					      class="htmx-indicator htmx-text">
						{{.T "web-core-auth-rol-grp-tnt-mod-form.submit-button-label"}}
					</span>
					<span id="rol-grp-tnt-inf-dgd-btn-tmp-txt"
					      class="hidden">
						{{.T "web-core-auth-rol-grp-tnt-mod-form.submit-button-label"}}
					</span>
				</button>
			</div>
		</form>
		{{end}}
	</div>
	{{end}}
</div>
{{ end }}
